<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
  <meta charset="UTF-8">
  <title>SearchList</title>
  <!-- Bootstrap CSS -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-9ndCyUaIbzAi2FUVXJi0CjmCapSmO7SnpJef0486qhLnuZ2cdeRhO02iuK6FUUVM" crossorigin="anonymous">


</head>
  <style>
    h1 {
      text-align: center;
      margin-top: 50px;
      display: inline-block;
      text-align: center;
    }

   .hidden {
     display: none;
   }








  </style>
</head>
<body>
<div style="text-align: center; margin-top: 50px;">
  <h1 style="display: inline;">SearchList</h1>
  <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-ho+j7jyWK8fNQe+A12Hb8AhRq26LrZ/JpcUGGOn+Y7RsweNrtN/tE3MoK7ZeZDyx" crossorigin="anonymous"></script>
  &nbsp;&nbsp;&nbsp;
  <a class="link-offset-2 link-offset-3-hover link-underline link-underline-opacity-0 link-underline-opacity-75-hover" href="/logout">
    로그아웃
  </a>
</div>
<hr />
<!-- <p th:text="${totalPages}"></p><p>totalPages</p> -->
<br/>
<!-- <p th:text="${bbsList.size()}"></p><p>bbsList.size</p> -->

<!-- Hidden input 요소 추가 -->
<input type="hidden" id="targetHidden" th:value="${searchparameter.target}" />
<input type="hidden" id="searchHidden" th:value="${searchparameter.search}" />
<input type="hidden" id="searchArr" th:value="${searchparameter.reDiscoverArr}" />
<input type="hidden" id="categoryHidden" th:value="${searchparameter.category}" />
<input type="hidden" id="period_of_viewHidden" th:value="${searchparameter.period_of_view}" />
<input type="hidden" id="typoSuggest" th:value="${typoSuggest}" />
<!--<input type="hidden" id="autorecomm" th:value="${autorecomm}" />-->


<div class="container mt-2">
  <!-- 리스트가 비어있는 경우 메시지 출력 -->
  <div th:if="${topKeywordList.isEmpty()}">
    <p>검색된 로그가 없습니다.</p>
  </div>

  <!-- 리스트가 비어있지 않은 경우 -->
  <div th:if="${not topKeywordList.isEmpty()}">
    <h3>인기 검색어</h3>
    <ul class="list-group">
      <li th:each="keyword : ${topKeywordList}" class="list-group-item justify-content-between align-items-center" style="max-width: 230px;">
        <!-- keyword 객체의 필드 값을 사용 -->
        <div class="d-flex">
          <span style="font-weight: bold">"</span>
          <span class="truncate-text" th:text="${keyword.key}"></span>
          <span style="font-weight: bold">"</span> &nbsp;
          <span th:text="${keyword.doc_count}" style="text-align: right; font-weight: bold"></span>
          <span> 회</span>
        </div>
      </li>
    </ul>
  </div>

</div>

<br/><br/>


<div class="border rounded p-3" style="width: 1500px;  height: 7000px; margin: 0 auto;">


  <br/>
  <!-- 검색 및 정렬 -->
  <div class="row">
    <div class="col-md-2" style="width: 150px;">
      <select class="form-select" aria-label="Default select example" id="choice" onchange="setChoice(getValue(this));" th:field="${searchparameter.choice}" th:value="${searchparameter.choice}">
        <option th:value="accuracyorderby" th:selected="${choice=='accuracyorderby'}">정확도순</option>
        <option th:value="recentorderby" th:selected="${choice=='recentorderby'}">최신순</option>
        <option th:value="olderorderby" th:selected="${choice=='olderorderby'}">오래된순</option>
      </select>
      <br/>
    </div>

    <div class="col-md-10" style="height: 50px;">
      <div class="col-md-2">
        <p>p tag TEST</p>
      </div>


      <br/><br/>
    <div class="d-flex">
      <div class="dropdown">
        <button class="btn btn-outline-secondary dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false">
          검색 대상
        </button>
        &nbsp;&nbsp;
        <ul class="dropdown-menu dropdown-menu-end" id="target" onchange="getValue(this);" th:value="${target}">
          <li><a class="dropdown-item" onclick="setValue('getall')">전체</a></li>
          <li><a class="dropdown-item" onclick="setValue('gettitle')">제목</a></li>
          <li><a class="dropdown-item" onclick="setValue('getcontent')">내용</a></li>
          <li><a class="dropdown-item" onclick="setValue('getfilename')">파일 이름</a></li>
          <li><a class="dropdown-item" onclick="setValue('getfilecontent')">파일 내용</a></li>
        </ul>
      </div>



      <input type="text" class="form-control" id="searchparam" th:value="${searchparameter.query}" style="width: 900px;" oninput="AutoComplete()"> &nbsp;&nbsp;
      <button type="button" class="btn btn-outline-secondary" onclick="SearchOption()">검색</button>&nbsp;&nbsp;
<!--      <button type="button" class="btn btn-outline-secondary dropdown-toggle" data-bs-toggle="dropdown" aria-expanded="false">-->
<!--        <span class="visually-hidden">Toggle Dropdown</span>-->
<!--      </button>-->
    </div>
    </div>
  </div>
  <br/><br/><br/>

  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
  <ul class="list-group" id="autocomplete-results" style="padding-left: 130px; width: 1030px"></ul>
  <br/>

  <div class="dropdown" style="width: 200px;">
    <button class="btn btn-secondary dropdown-toggle" type="button" id="dropdownDateButton" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
      조회기간 선택
    </button>
    <ul class="dropdown-menu" id="period_of_view" onchange="getValue(this);" th:value="${searchparameter.period_of_view}">
      <li><a class="dropdown-item" onclick="setPeriod_of_viewValue('0')">전체 기간</a></li>
      <li><a class="dropdown-item" onclick="setPeriod_of_viewValue('1')">1일</a></li>
      <li><a class="dropdown-item" onclick="setPeriod_of_viewValue('7')">1주</a></li>
      <li><a class="dropdown-item" onclick="setPeriod_of_viewValue('30')">한달</a></li>
      <li><a class="dropdown-item" onclick="setPeriod_of_viewValue('365')">1년</a></li>
      <li><a class="dropdown-item" onclick="showDirectInput()">직접입력</a></li>
    </ul>
  </div>

  <!-- 직접 입력을 위한 입력 필드 -->
  <div id="directInput" style="display: none;">
    <input type="text" id="directInputValue" placeholder="기간을 입력하세요">
    <button type="button" onclick="setDirectInputValue()">확인</button>
  </div>



  <span>선택된 기간: </span> <!-- <span id="periodInnerLine" th:if="${searchparameter.period_of_view == 0}">전체기간</span> -->
  <span id="periodInnerLine" th:text="${searchparameter.period_of_view}"></span>
  <span> 일</span>


  <div class="dropdown" style="width: 200px;">
    <button class="btn btn-secondary dropdown-toggle" type="button" id="dropdownMenuButton" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
      카테고리 선택
    </button>
    <ul class="dropdown-menu" id="category" onchange="getValue(this);" th:value="${category}">
      <li><a class="dropdown-item" onclick="setCategoryValue('전체')">전체 카테고리</a></li>
      <li><a class="dropdown-item" onclick="setCategoryValue('행안부 파일')">행안부 파일</a></li>
      <li><a class="dropdown-item" onclick="setCategoryValue('행안부 이미지')">행안부 이미지</a></li>
      <li><a class="dropdown-item" onclick="setCategoryValue('정치')">정치</a></li>
      <li><a class="dropdown-item" onclick="setCategoryValue('전국')">전국</a></li>
      <li><a class="dropdown-item" onclick="setCategoryValue('오피니언')">오피니언</a></li>
      <li><a class="dropdown-item" onclick="setCategoryValue('연예')">연예</a></li>
      <li><a class="dropdown-item" onclick="setCategoryValue('스포츠')">스포츠</a></li>
      <li><a class="dropdown-item" onclick="setCategoryValue('세계')">세계</a></li>
      <li><a class="dropdown-item" onclick="setCategoryValue('산업')">산업</a></li>
      <li><a class="dropdown-item" onclick="setCategoryValue('사회')">사회</a></li>
      <li><a class="dropdown-item" onclick="setCategoryValue('사람들')">사람들</a></li>
      <li><a class="dropdown-item" onclick="setCategoryValue('북한')">북한</a></li>
      <li><a class="dropdown-item" onclick="setCategoryValue('문화')">문화</a></li>
      <li><a class="dropdown-item" onclick="setCategoryValue('라이프')">라이프</a></li>
      <li><a class="dropdown-item" onclick="setCategoryValue('경제')">경제</a></li>
    </ul>
  </div>
  <span>현재 카테고리 : </span> <span id="categoryInnerLine" th:value="${category}"></span>

  <!-- 검색 결과물이 있는 경우에만 아래 출력 -->
  <div th:if="${data.hits != null and not #lists.isEmpty(data.hits.hits)}">

    <!-- 결과 내 재 검색 버튼 -->
    <div class="form-check form-switch" style="display: flex; justify-content: flex-end; margin-right: 50px;">
      <input class="form-check-input" type="checkbox" role="switch" id="flexSwitchCheckDefault" th:checked="${searchparameter.research}" onclick="updateReSearch()">
      <span>&nbsp;&nbsp;</span>
      <label class="form-check-label" for="flexSwitchCheckDefault">결과 내 전체 재검색</label>
    </div>

    <br/>





    <br/>
    <span th:if="${typoSuggest != null}" style="font-size: 19px; font-weight: bold">혹시 찾으시는 결과가 이것은 아닌가요?</span>
    <span th:if="${typoSuggest != null}" th:text="${typoSuggest}" style="font-size: 15px; font-weight: bold"></span>

    <span th:if="${autorecomm != null}" style="font-size: 19px; font-weight: bold">
      다음과 같이 검색 해보시는건 어떠신가요?(로그기반 자동)
    </span>
    <span th:if="${autorecomm != null}" th:text="${autorecomm}" style="font-size: 15px; font-weight: bold"></span>

    <br/>
    <span th:if="${recommmanual != null}" style="font-size: 19px; font-weight: bold">해당 검색어는 어떠신가요?(사용자지정 수동)
      <br/>
        <span th:each="recommendation : ${recommmanual.recomm}">
            <span th:text="${recommendation}" style="font-size: 15px; font-weight: bold"></span>&nbsp;
        </span>
    </span>
    <br/><br/><br/><br/>
    <h3>검색결과 : <span th:text="${data.hits.total.value}"></span> 건</h3>

<!--  <table class="table">-->
<!--    <thead class="table-dark">-->
<!--    <th>제목</th>-->
<!--    <th>카테고리</th>-->
<!--    <th>작성자</th>-->
<!--    <th>작성일</th>-->
<!--    </thead>-->
<!--    <tbody>-->
<!--    <tr th:each="item : ${data.hits.hits}">-->
<!--      <td th:utext="${item.highlight.getTitle() != null} ? ${item.highlight.getTitle()[0]} : ${item._source.title}">-->
<!--        Title-->
<!--      </td>-->
<!--      <td th:text="${item._source.category}">Category</td>-->
<!--      <td th:text="${item._source.author}">Author</td>-->
<!--      <td th:text="${item._source.wdate}">Date</td>-->
<!--    </tr>-->
<!--    </tbody>-->
<!--  </table>-->

    <div th:each="item : ${data.hits.hits}" style="margin-bottom: 20px;" class="border border-2">
      <span th:attr="onclick=|openUrl('${item._source.url_link}')|">     <!-- 제목, 링크이동 -->
        <span th:utext="${item.highlight.getTitle() != null} ? ${item.highlight.getTitle()[0]} : ${item._source.title}" style="cursor: pointer; color: royalblue; font-size: 1.5em;"></span>
      </span>

      <br/>

      <I><small>  <!-- 부제목 -->
            <span th:utext="${item._source.getSub_title() != null} ? ${item._source.getSub_title()} : ''"> <!-- SubTitle 이 존재하는 경우 -->
      </span>
      </small></I>

      <br/>
      <!-- 내용 출력 -->
      <span th:if="${item.highlight.getContent() == null}">
          <span th:utext="${#strings.abbreviate(item._source.content, 330)}"></span>
      </span>


      <!-- 내용의 하이라이트 있는경우 -->
      <span th:if="${item.highlight.getContent() != null}">
        <span th:utext="${item.highlight.content[0]}"></span><span>...</span>

      </span>

      <br/><br/>
    <!-- 파일 제목-->

      <div th:if="${item.highlight.getFilenameOrgHighlight() != null}">
        <p th:each="fileNameOrg : ${item.highlight.getFilenameOrgHighlight()}">
          <span th:if="${#strings.contains(fileNameOrg, '.hwp')}">
              <!-- .hwp 파일인 경우 -->
              <span th:utext="${fileNameOrg}"></span>
          </span>
          <span th:if="${#strings.contains(fileNameOrg, '.pdf')}">
<!--              &lt;!&ndash; .pdf 파일인 경우 &ndash;&gt;-->
              <span th:utext="${fileNameOrg}"></span>
          </span>
        </p>

        <div style="border: solid 1px cyan; margin-bottom: 20px;" th:if="${item.highlight.getFileContentHighlight() != null}"> <!-- 파일내용 하이라이트 O-->
          <span th:utext="${#strings.abbreviate(item.highlight.fileContentHighlight[0], 900)}"></span>
          <span>...</span>
        </div>

        <div style="border: solid 1px brown; margin-bottom: 20px;" th:if="${item._source._file != null and item.highlight.getFileContentHighlight() == null}"> <!-- 파일내용 하이라이트 X -->
          <span th:utext="${#strings.abbreviate(item._source._file[0].content, 350)}"></span>
        </div>
      </div>



      <div th:if="${item.highlight.getFilenameOrgHighlight() == null and item._source.getCategory() == '행안부 파일'}">
        <!-- 파일이름 하이라이트 없는 경우 -->
        <p th:text="${item._source.getCategory()}"></p>
          <p th:each="itemNameOrg : ${item._source._file}">
            <span th:if="${itemNameOrg != null}">
              <span th:if="${itemNameOrg.getNameOrg() != null}">
                <span th:text="${itemNameOrg.getNameOrg()}"></span>

                <div style="border: solid 1px cyan; margin-bottom: 20px;" th:if="${item.highlight.getFileContentHighlight() != null}"> <!-- 파일내용 하이라이트 O-->
                  <span th:utext="${#strings.abbreviate(item.highlight.fileContentHighlight[0], 900)}"></span>
                  <span>...</span>
                </div>

                <div style="border: solid 1px brown; margin-bottom: 20px;" th:if="${item._source._file != null and item.highlight.getFileContentHighlight() == null}"> <!-- 파일내용 하이라이트 X -->
                  <span th:utext="${#strings.abbreviate(item._source._file[0].content, 350)}"></span>
                </div>
              </span>
            </span>
          </p>
        </p>
      </div>



      <!-- 작성자 | 작성일 -->
      <div>
        <span>-- </span><span th:text="${item._source.category}"></span>&nbsp;&nbsp;<span th:text="${item._source.wdate}"></span>
      </div>

      </div>




      <br/>
    </div>




    <br/><br/>

    <!-- Pagination Logic -->
    <!-- 동적 할당 하기 위해서 지역변수 선언 -->
    <div th:with="choice=${searchparameter.choice}, search=${searchparameter.search}, target=${searchparameter.target}">
      <!-- 파지네이션 -->
      <nav aria-label="Page navigation" th:if="${totalPages > 0}">
        <ul class="pagination justify-content-center">
          <li class="page-item">
            <a class="page-link" href="#" aria-label="Previous" onclick="goToFirstPage(event)">
              <span aria-hidden="true">&laquo;</span>
              <span class="sr-only">First</span>
            </a>
          </li>
          <li class="page-item">
            <a class="page-link" href="#" aria-label="Previous" onclick="goToPrev(event)">
              <span aria-hidden="true"><</span>
              <span class="sr-only">Previous</span>
            </a>
          </li>
          <!-- 페이지 링크를 동적으로 생성 -->
          <!-- 현재 페이지 그룹 계산 -->
          <th:block th:with="currentPageGroup=${(searchparameter.page - 1) / 10}">
            <li class="page-item" th:each="page : ${#numbers.sequence((currentPageGroup * 10) + 1, (currentPageGroup * 10) + 10)}"
                th:if="${page} &lt;= ${totalPages}">
              <a class="page-link" href="#" th:text="${page}" onclick="goToPage(this.innerText)"></a>
            </li>
          </th:block>
          <li class="page-item">
          <a class="page-link" href="#" aria-label="Next" onclick="goToNext(event)">
            <span class="sr-only">Next</span>
            <span aria-hidden="true">></span>
          </a>
          </li>
          <li class="page-item">

            <a class="page-link" href="#" aria-label="Next" onclick="goToLastPage(this.getAttribute('data-total-pages'))" th:data-total-pages="${totalPages}">
              <span class="sr-only">End</span>
              <span aria-hidden="true">&raquo;</span>
            </a>
          </li>
        </ul>
      </nav>
    </div>


  </div>

  <div th:else>
<!--     <h3 th:if="${searchparameter.search != }"> 검색된 항목이 없습니다. </h3>-->
  </div>

<!--  <p th:text="${searchparameter.page}"></p>-->
<!--  <p th:text="${searchparameter.search}"></p>-->


<!--  <p th:text="${data.hits.hits[0]._source.title}"></p>-->





</div>

</br></br>


<script type="text/javascript">

  // const timestamp = `[${new Date().toUTCString()}]`;
  var search = document.querySelector('#searchparam');
  var choice = document.getElementById('choice').value;
  var target = document.getElementById('targetHidden').value;
  var category = document.getElementById('categoryHidden').value;
  document.getElementById("categoryInnerLine").innerText = category;
  var research = document.getElementById('flexSwitchCheckDefault').checked;
  var period = document.getElementById('period_of_viewHidden').value;
  document.getElementById("periodInnerLine").innerText = period;


  // console.log(research, timestamp);

  // console.log(target); // 초기화된 값 출력 (콘솔 확인용)
  // console.log(search); // 초기화된 값 출력 (콘솔 확인용)
  // console.log(choice); // 초기화된 값 출력 (콘솔 확인용)

  function setValue(value) {
    // console.log("Selected value: " + value);
    target = value;
  }

  function setCategoryValue(value) {
    category = value;

    document.getElementById("categoryInnerLine").innerText = category;
  }

  function setChoice(value) {
    // alert("on here!!");
    choice = value;
  }
  function SearchOption() {
    if (research == undefined){
      research = false;
    }
    if (period == undefined){
      period = 0;
    }
    // alert(choice);

    if (research == false){
      var searchValue = encodeURIComponent(search.value);
      // alert(period);
      window.location.href = "/searchlist?page=1&choice=" + choice + "&search=" + searchValue + "&target=" + target + "&research=" + research + "&category=" + category + "&query=" + searchValue + "&period_of_view=" + period;
    } else {
      var originSearch = document.getElementById('searchHidden').value;
      var searchValue = encodeURIComponent(search.value);
      var receivedData = document.getElementById('searchArr').value;
      var searchwordRegex = /\[ReDiscover\(searchword=(.*?)\)\]/;
      var matches = receivedData.match(searchwordRegex);
      var searchwords = matches ? matches[1].split(',') : [];
      // alert(period);

      // console.log("추출된 검색어들: ", searchwords);

      var url = "/searchlist?page=1&choice=" + choice + "&search=" + encodeURIComponent(originSearch) + "&target=" + target + "&research=" + research + "&searchword=" + encodeURIComponent(search.value) + "&query=" + searchValue;

      for (var i = 0; i < searchwords.length; i++) {
        url += "&searchword=" + encodeURIComponent(searchwords[i]);
      }

      url += "&category=" + category;

      url += "&period_of_view=" + period;

      window.location.href = url;
    }
  }

  function AutoComplete(){
    var searchValue = document.getElementById("searchparam").value;
    // console.log(searchValue);
// AJAX 호출을 수행합니다.
    $.ajax({
      url: "/getAutoComplete", // 자동완성 결과를 받아올 엔드포인트 URL을 입력해주세요.
      type: "GET",
      data: {
        searchdata: searchValue
      },
      success: function(data) {
        // AJAX 호출이 성공하면, 결과를 처리하는 함수를 호출합니다.
        // console.log("Received data:", data);
        handleAutoCompleteResults(data);
      },
      error: function() {
        // AJAX 호출이 실패하면, 에러 처리를 합니다.
        console.log("Error occurred during AJAX call.");
      }
    });
  }

  function handleAutoCompleteResults(results) {
    // 결과를 받아와서 ul 태그에 추가하는 함수
    var autocompleteResults = $("#autocomplete-results");
    autocompleteResults.empty(); // 기존 결과를 지우고 새로운 결과를 추가

    // 받아온 결과를 ul 태그에 추가합니다.
    results.forEach(function(result) {
      var listItem = $("<li class=\"list-group-item\"></li>");
      var link = $("<a></a>")
              .addClass("dropdown-item")
              .text(result); // 받아온 결과값을 출력

      // 자동완성된 검색어를 클릭하면 해당 검색어를 검색어 입력창에 추가하고, 검색을 수행
      link.click(function() {
        $("#searchparam").val(result);
        SearchOption(); // 검색을 수행하는 함수를 호출
      });

      listItem.append(link);
      autocompleteResults.append(listItem);
    });
  }


  function goToPrev(event){
    var currentURL = window.location.href;

    // URL에서 "page" 파라미터의 값을 가져옴
    var urlParams = new URLSearchParams(new URL(currentURL).search);
    var currentPage = parseInt(urlParams.get("page"));

    // 현재 페이지가 1보다 큰 경우에만 -1을 적용하여 새로운 페이지 번호 계산
    if (currentPage > 1) {
      var newPage = currentPage - 1;

      // URL에서 "page" 파라미터를 새로운 페이지 번호로 변경
      urlParams.set("page", newPage);

      // 변경된 URL을 새로운 URL로 생성
      var newURL = currentURL.split("?")[0] + "?" + urlParams.toString();

      // 페이지 이동
      window.location.href = newURL;
    }

  }

  function goToNext() {
    var currentURL = window.location.href;

    // URL에서 "page" 파라미터의 값을 가져옴
    var urlParams = new URLSearchParams(new URL(currentURL).search);
    var currentPage = parseInt(urlParams.get("page"));

    // 페이지 증가
    var newPage = currentPage + 1;

    // URL에서 "page" 파라미터를 새로운 페이지 번호로 변경
    urlParams.set("page", newPage);

    // 변경된 URL을 새로운 URL로 생성
    var newURL = currentURL.split("?")[0] + "?" + urlParams.toString();

    // 페이지 이동
    window.location.href = newURL;
  }

  function goToFirstPage() {
    var currentURL = window.location.href;
    var urlParams = new URLSearchParams(new URL(currentURL).search);

    // "page" 파라미터를 1로 설정
    urlParams.set("page", 1);

    // 변경된 URL을 새로운 URL로 생성
    var newURL = currentURL.split("?")[0] + "?" + urlParams.toString();

    // 페이지 이동
    window.location.href = newURL;
  }

  function goToLastPage(totalPages) {
    var currentURL = window.location.href;
    var urlParams = new URLSearchParams(new URL(currentURL).search);

    // "page" 파라미터를 totalPages로 설정
    urlParams.set("page", totalPages);

    // 변경된 URL을 새로운 URL로 생성
    var newURL = currentURL.split("?")[0] + "?" + urlParams.toString();

    // 페이지 이동
    window.location.href = newURL;
  }

  function goToPage(pageNumber) {
    var currentURL = window.location.href;
    var urlParams = new URLSearchParams(new URL(currentURL).search);

    // 페이지 번호를 클릭된 페이지로 설정
    urlParams.set("page", pageNumber);

    // 변경된 URL을 새로운 URL로 생성
    var newURL = currentURL.split("?")[0] + "?" + urlParams.toString();

    // 페이지 이동
    window.location.href = newURL;
  }

  function openUrl(URL){
    console.log(URL)
    window.open(URL);
  }

  function setPeriod_of_viewValue(value) {
    period = value;
    console.log(period)

    if(period == 0){
      document.getElementById("periodInnerLine").innerText = "전체 기간";
    }
    else{
    document.getElementById("periodInnerLine").innerText = period;
    }
  }

  function showDirectInput() {
    var directInputDiv = document.getElementById("directInput");
    directInputDiv.style.display = "block";
  }

  function setDirectInputValue() {
    var inputValue = document.getElementById("directInputValue").value;
    if (!/^[0-9]+$/.test(inputValue)) {
      alert("숫자혹은 양수만 입력해주세요.");
      return;
    }
    else if(inputValue.trim() == ""){
      alert("공백은 불가합니다.");
      return;
    }

    document.getElementById("periodInnerLine").innerText = inputValue;
    period = inputValue;
    console.log(period);
    hideDirectInput();
  }

  function hideDirectInput() {
    var directInputDiv = document.getElementById("directInput");
    directInputDiv.style.display = "none";
  }






  function updateReSearch() {
    research = document.getElementById("flexSwitchCheckDefault").checked;
    console.log(research);
  }

  document.getElementById('choice').onchange = function() {
    choice = document.getElementById('choice').value;
  };

  function toggleContent(event) {
    const contentDiv = event.target.querySelector('.content-box');
    contentDiv.classList.toggle('hidden');
  }




</script>
</body>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js" integrity="sha384-geWF76RCwLtnZ8qwWowPQNguL3RmwHVBC9FhGdlKrxdiJJigb/j/68SIy3Te4Bkz" crossorigin="anonymous"></script>
</html>